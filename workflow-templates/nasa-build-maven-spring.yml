name: Nasa Build maven Spring CI

on:
  workflow_dispatch:
  check_run:
    types:
      - completed

permissions:
  checks: read
  contents: write

env:
  MAVEN_IMAGE: harbor.nb.no/nationallibraryofnorway/docker-maven-non-root:3.8.8-jdk-21-slim-helm3
  DEV_REPLICAS: 1
  PROD_REPLICAS: 1
  SERVICE_NAME: "<service-name>"
  DEPLOY_E2E: "true"


jobs:
  build-maven-spring:
    uses: NationalLibraryOfNorway/nasa-workflows/.github/workflows/build-mvn-spring-app.yaml@main
    secrets:
      ARTIFACTORY_NB: ${{ secret.ARTIFACTORY_NB }}
      ARTIFACTORY_USER_NASA: ${{ secrets.ARTIFACTORY_USER_NASA }}
      ARTIFACTORY_PASS_NASA: ${{ secrets.ARTIFACTORY_PASS_NASA }}
      PROXY_NB: ${{ secrets.PROXY_NB }}
      DOCKER_REGISTRY_NB: ${{ secret.DOCKER_REGISTRY_NB }}
      DOCKER_HARBOR_USER_NASA: ${{ secret.DOCKER_HARBOR_USER_NASA }}
      DOCKER_HARBOR_PASS_NASA: ${{ secret.DOCKER_HARBOR_PASS_NASA }}
      NVD_REPO: ${{ secret.NVD_REPO }}
